---
interface Props {
  phone?: string;
  phoneFormatted?: string;
  whatsappMessage?: string;
}

const {
  phone = '5571984843571',
  phoneFormatted = '(71) 98484-3571',
  whatsappMessage = 'Olá! Vim pelo site e gostaria de um orçamento.',
} = Astro.props;

const whatsappLink = `https://wa.me/5571984843571?text=${encodeURIComponent(whatsappMessage)}`;
---

<section class="section-padding bg-deep-black" id="contato">
  <div class="container-custom">
    <div class="max-w-2xl mx-auto text-center">
      <!-- Header -->
      <span class="inline-block bg-vibrant-yellow text-deep-black text-sm font-semibold px-4 py-1.5 rounded-full mb-6">
        Fale Comigo
      </span>
      
      <h2 class="text-h2 text-white mb-4">
        Pronto para reviver seu computador?
      </h2>
      
      <p class="text-gray-400 mb-8 text-lg">
        Entre em contato agora mesmo pelo WhatsApp. Atendimento rápido e orçamento sem compromisso!
      </p>
      
      <!-- Número de telefone destacado -->
      <div class="mb-8">
        <p class="text-sm text-gray-500 mb-2">Meu número:</p>
        <button 
          class="price-display text-vibrant-yellow hover:text-accent-yellow transition-colors cursor-pointer group flex items-center justify-center gap-2 mx-auto"
          onclick={`navigator.clipboard.writeText('${phoneFormatted}'); this.querySelector('.copy-feedback').classList.remove('opacity-0'); setTimeout(() => this.querySelector('.copy-feedback').classList.add('opacity-0'), 2000);`}
          title="Clique para copiar"
          type="button"
        >
          <!-- Phone Icon -->
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            width="24" 
            height="24" 
            viewBox="0 0 24 24" 
            fill="none" 
            stroke="currentColor" 
            stroke-width="2" 
            stroke-linecap="round" 
            stroke-linejoin="round"
            class="inline-block"
            aria-hidden="true"
          >
            <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92Z"/>
          </svg>
          <span>{phoneFormatted}</span>
          <!-- Copy Icon -->
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            width="18" 
            height="18" 
            viewBox="0 0 24 24" 
            fill="none" 
            stroke="currentColor" 
            stroke-width="2" 
            stroke-linecap="round" 
            stroke-linejoin="round"
            class="opacity-50 group-hover:opacity-100 transition-opacity"
            aria-hidden="true"
          >
            <rect width="14" height="14" x="8" y="8" rx="2" ry="2"/>
            <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>
          </svg>
          <span class="copy-feedback text-sm text-green-400 opacity-0 transition-opacity absolute -bottom-6 left-1/2 -translate-x-1/2">
            Copiado!
          </span>
        </button>
      </div>
      
      <!-- WhatsApp CTA -->
      <!-- Umami: whatsapp_click; data-umami-props fallback 'unknown' será atualizado em runtime -->
      <a
        href={whatsappLink}
        target="_blank"
        rel="noopener noreferrer"
        class="btn-primary inline-flex items-center gap-3 text-lg px-8 py-4"
        data-umami-event="whatsapp_click"
        data-umami-props='{"campaign":"unknown"}'
      >
        <!-- WhatsApp Icon -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          aria-hidden="true"
        >
          <path d="M3 21l1.65-3.8a9 9 0 1 1 3.4 2.9L3 21"/>
          <path d="M9 10a.5.5 0 0 0 1 0V9a.5.5 0 0 0-1 0v1Zm0 0a5 5 0 0 0 5 5m0 0a.5.5 0 0 0 0-1h-1a.5.5 0 0 0 0 1h1Z"/>
        </svg>
        Chamar no WhatsApp
      </a>
      
      <!-- Info adicional -->
      <p class="text-gray-500 text-sm mt-6">
        Atendimento de Segunda a Quinta, das 13h às 18h
      </p>
    </div>
  </div>
</section>

